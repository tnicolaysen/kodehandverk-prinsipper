<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# 

<img src="pocket-knife.jpg"/>

???

Da skal vi kjapt gå gjennom SRP, som er det første prinsippet av SOLID, først introdusert av Robert Martin. 

---

class: center, middle

'Every class should have one responsibility, and that responsibility should be entirely encapsulated by the class.'

'A class should only have one reason to change'

???

Definisjonen av SRP lyder som følger; "Every class should have one responsibility, and that responsibility should be entirely encapsulated by the class".

Videre sier SRP at 'A class should only have one reason to change.'

For å forstå denne definisjonen, hjelper det å først definere hva et ansvar er: 

Et ansvar i denne konteksten blir sett på 'som en årsak til å forandre seg'.

Videre kan man se på disse ansvarene som en familie av funksjoner som betjener en bestemt rolle, potensielt innad i organisjasjonen.
 
La oss anta at du befinner deg i en hierarkisk organisasjon, med avdelinger som Database-admins, Produktsjefer, Markedsføring og Designere.

Produktsjefen kommer ned til deg og ber deg forandre forretningslogikk. Like etterpå kommer database-avdelingen til deg og sier at databasen skal byttes fra MySQL til en NoSQL-database. 

Dersom du nå setter deg ned og implementerer disse endringene og rører samme modul/klasse ved begge anledningene, har man brutt SRP. 

---
class: center, middle

# Hvorfor er dette en bra ting?

???

For nye utviklere vil det kanskje være lettere å skitne til hendene, fordi hver modul bare er ansvarlig for å gjøre en enkelt ting.
Det vil rett og slett bli lettere å endre koden. 

Ettersom en klasse har et ansvar, vil det være lettere å teste dette.

Altså sitter vi igjen med en mer robust kodebase

---

# Eksempel

```java
class MoviePlayer{
	Movie findById(Id id){}
	String getDirector(){}
	Time getDuration(){}
	byte[] streamMP4(){}
	void pause(){}
	void play(){}
	void playNextMovie(){}
	void fastForward(){}
	void backtrack(){}
	void slowMotion(){}
	void renderMoviePlayer(){}
}

```

???

Så, over på et eksempel som jeg tenkte vi skulle løse i plenum.

Vi er ansvarlige for å lage en videoavspiller, og har foreløpig kommet opp med denne shitty modulen.

 Hvor mange grunner ser dere til å forandre seg har denne? Hvor begynner vi?

/*(Kopier metoden over til en ny fil, og begynn refaktorering).*/

Eksempler på grunner kan være å skrive ut en liste over skuespillere, dersom man vil legge til flere videoformater, man vil legge til datbasekall, etc. 

---
class: center, middle

```java
$ git checkout srp-esben

$ cd 11.02.15/srp/

$ open CalendarActivity.java
```

???

Da skal vi prøve litt i praksis. Inne i mappen 11.02.15/srp vil dere finne en java-klasse som ble lagd av en gruppe studenter (som inkluderer meg) når vi skrev masteroppgaven. 
Kjenner alle til Android? En aktivitet kan bli sett på som en kontroller for et view. 
Aktiveteten jeg har lagt ut skal vise en kalender som inneholder informasjon om et barn har tatt astma-medisinen sin på en gitt dag. I tillegg har vi detalj-visninger på spesifikke dager om hvor mange doser et barn har tatt for en gitt dag. 

Oppgaven deres blir å refaktorere dette (pseudo er også bra), slik at aktiveteten står igjen med et ansvar. Jeg har selv ingen fasit, så vi får se hvordan dette går. 

---

???

Helt til slutt tenkte jeg å hente inn litt erfaringer fra dere. Selv sitter jeg stort sett på frontend, hvor vi skriver javascript-moduler i vanilla + jQuery. 

Så da lyder spørsmålet mitt som følgende: Er dette et prinsipp som brukes dette ofte på javascript-koden deres? 

Hvis man for eksempel har et enkelt skjema, med litt toggling av hvilke deler som skal vises, og som skal sendes til et rest-api. Er dette prinsippet brukbart i en slik kontekst

---

# Eksempel

```java
class MoviePlayer{
	byte[] streamMP4(){}
	void pause(){}
	void play(){}
	void fastForward(){}
	void backTrack(){}
	void slowMotion(){}
}
class MovieRepository{
	Movie findById(Id id){}
}
class MovieMeta{
	String getDirector(){}
	Time getDuration(){}
}
```

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
</body>
</html>
